{"componentChunkName":"component---src-templates-blog-js","path":"/development/salesforce/sfcc/sfra/2021/07/27/sfcc-sfra-httpclient/","result":{"data":{"markdownRemark":{"excerpt":"Using HttpClient in Salesforce Commerce Cloud I needed a quick way to get a model for a view.  For our API calls, I created servicesâ€¦","id":"128ee4ee-9714-5662-94f8-3e31e129c03c","frontmatter":{"title":"Dev Note - HttpClient in SFRA (Salesforce)","subtitle":"SFRA HttpClient Code","excerpt":"Posting code I used for a HttpClient call in Salesforce Commerce Cloud SFRA","date":"July 27, 2021","author":"Mark Roxberry","featured":true,"tags":["development","sfra","salesforce"],"postimage":{"alt":"main post image","src":{"absolutePath":"/home/runner/work/markrox.dev/markrox.dev/temp/src/archive/2021-07-27-sfcc-sfra-httpclient/post.png","childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAADI0lEQVR42mVSS2hTQRSdpDUtVaoiuNGN4A91oYIgunAjfsCNuCii+NeNIuhGlKrgTlGU1jZpXr7aakutH6RVqUqMtvUTY9J8TJrMzMv3zXsv85LmJf2lVieJrhzO4sxl7rn3njvgYJ9nA/cFtPhBB64xhBr1ntpWT40h8jqmTql5NZvt/hwCbSGNPqppDYL74UbuZ1guzJVKxYkpkM9kJEFo7v++vcv71IN9KPHWG9lpHd7cGSSinBGJ0x1Yafpx/A1uG4nu73GvtvoVdbKgFianSoDIlNJsTlFEIhZyOUqVify4LJIrA54ASsT5GIRoNBSdmSn9Zmdu5oV7LBxLp5LpFM8DSaZEojRDi1lFVcpEEDOirOSpwrhEs2kiw0g0GOXtP7PnPpLbPyhWir/nZl1xCkSJFhQlnJIf+UlPgEAhU8gqDLJMEyLNs66ooo7nO4f94K5P086Ddrj+Sey0Q5hv44GqKJxHWPoQAa6M5V24208e+si25/zaHr7pTfwrL/1SczmRHHk8vN7q0bb6AMcDAwQmDF6PiXUcBEakNSGNCYEO2GBGOiZkgFojAm1wTTe2jAqXPyaaHciJafuHQN09l7ZjrFYfAEcHE0AP55nLmQw1FaKtkJrqlQkZoUYPgQHprPxNd+alF/d5445wEux5GWdF2Ltq25p/KHMj1HJ/RbVVsHhbpCuSZ77PlmbByXdJlrzIjussaGkn3tQXrzWjBivSWdDO/uS63pjOjBbY8GI7brSVCXu89QkuFicn2CdZaEMrumMXR8ih9+nrLvmGO3P5q3hhhBx+n7r6TTo/RE45hWsu+cBg+vgH4ZZHrrPgJdaIPF4sTc8AZhUreG6InHYKZ5zk7CeRqewaSFz6IjYNpve9Sh5zCHv7U7sHUix+wpEGFn6Z0Rseg9Msmc0zz4IabLjeiustmM3ZaMes5y3P4qt6YjoTms+CHFxo5xkWP2BL4o/1uqJ+XziCysnAVDGp4pnG/Ne5ssNVt7jy/kBrSNMSZG5ttLi+e/0SkWLxJKiu939U7a0owh29obvD6M4QPP/Y4fg0IgkkGAz7fIE/otNVA0l7/QYAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/56ccb21308e55198624d0e5669ce03a5/c2d17/post.png","srcSet":"/static/56ccb21308e55198624d0e5669ce03a5/76a4f/post.png 750w,\n/static/56ccb21308e55198624d0e5669ce03a5/c2d17/post.png 800w","sizes":"100vw"},"sources":[{"srcSet":"/static/56ccb21308e55198624d0e5669ce03a5/2b382/post.avif 750w,\n/static/56ccb21308e55198624d0e5669ce03a5/6ee87/post.avif 800w","type":"image/avif","sizes":"100vw"},{"srcSet":"/static/56ccb21308e55198624d0e5669ce03a5/66907/post.webp 750w,\n/static/56ccb21308e55198624d0e5669ce03a5/0d27e/post.webp 800w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.75},"resize":{"src":"/static/56ccb21308e55198624d0e5669ce03a5/f3583/post.png","height":900,"width":1200}}}}},"html":"<h2>Using HttpClient in Salesforce Commerce Cloud</h2>\n<p>I needed a quick way to get a model for a view.  For our API calls, I created services, profiles and credentials that are managed by SFCC.  But that's overkill for a one off call.  HttpClient is a way to make external calls, in SFCC/SFRA there's a little twist.  Code to use the TypeScript HTTPClient in cartridge code:</p>\n<pre><code class=\"language-javascript\" data-meta=\"{numberLines}\">function callExternalUrl(parameters) {\n    var HTTPClient = require('dw/net/HTTPClient');\n    var Logger = require('dw/system/Logger');\n\n    if (!empty(parameters)) {\n        var url = parameters.url;\n        var userId = parameters.userId;\n        var password = parameters.password;\n\n        var httpClient = new HTTPClient();\n        httpClient.setTimeout(2000);\n        httpClient.open(\"GET\", url, userId, password);\n        httpClient.send();\n\n        if (httpClient.statusCode == 200) {\n            //confirm response\n            Logger.getLogger(\"shop\").info(\n                httpClient.text\n            );\n\n            // do something with response object\n            // var sourceObject = JSON.parse(httpClient.text);\n\n            }\n        } else {\n            // error handling\n            Logger.getLogger(\"shop\").error(\n                \"An error occured with status code \" + \n                httpClient.statusCode\n            );\n        }\n    }\n\n// ...\n// var parameters = {\n//     url: \"\",\n//     userId: \"\",\n//     password: \"\"\n// }\n// callExternalUrl(parameters)\n</code></pre>"}},"pageContext":{"slug":"/development/salesforce/sfcc/sfra/2021/07/27/sfcc-sfra-httpclient/"}},"staticQueryHashes":["1460613570","2052298874","2446865869","717330468"],"slicesMap":{}}